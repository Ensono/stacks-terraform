# PROJECT_NAME

## DESCRIPTION

Bootstraps the infrastructure for {{SELECT_APP_TYPE }}.

Will be used within the provisioned pipeline for your application depending on the options you chose.

Pipeline implementation for infrastructure relies on workspaces, you can pass in whatever workspace you want from {{ SELECT_DEPLOYMENT_TYPE }} pipeline
YAML.

## PREREQUISITES

Azure Subscripion

- SPN
  - Terraform will use this to perform the authentication for the API calls
  - you will need the `client_id, subscription_id, client_secret, tenant_id`

Terraform backend

- resource group (can be manually created for the terraform remote state)
- Blob storage container for the remote state management

## USAGE

To activate the terraform backend for running locally we need to initialise the SPN with env vars to ensure you are running the same way as the
pipeline that will ultimately be running any incremental changes.

```bash
docker run -it --rm -v $(pwd):/opt/tf-lib amidostacks/ci-tf:latest /bin/bash
```

```bash
export ARM_CLIENT_ID=xxxx \
ARM_CLIENT_SECRET=yyyyy \
ARM_SUBSCRIPTION_ID=yyyyy \
ARM_TENANT_ID=yyyyy
```

alternatively you can run `az login`

To get up and running locally you will want to create a `terraform.tfvars` file

```bash
TFVAR_CONTENTS='''
vnet_id                 = "amido-stacks-vnet-uks-dev"
rg_name                 = "amido-stacks-rg-uks-dev"
resource_group_location = "uksouth"
name_company            = "amido"
name_project            = "stacks"
name_component          = "spa"
name_environment        = "dev"
'''
$TFVAR_CONTENTS > terraform.tfvars
```

```sh
terraform workspace select dev || terraform workspace new dev
```

terraform init -backend-config=./backend.local.tfvars

| Name    | Version |
|---------|---------|
| azurerm | n/a     |
| tls     | n/a     |

## Requirements

| Name                                                                     | Version  |
|--------------------------------------------------------------------------|----------|
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >= 1.5.1 |

## Providers

| Name                                                         | Version |
|--------------------------------------------------------------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider_azurerm) | n/a     |
| <a name="provider_tls"></a> [tls](#provider_tls)             | n/a     |

## Modules

No modules.

## Resources

| Name                                                                                                                                                                           | Type        |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|
| [azurerm_application_insights.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/application_insights)                                   | resource    |
| [azurerm_container_registry.registry](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/container_registry)                                      | resource    |
| [azurerm_dns_ns_record.parent_link](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/dns_ns_record)                                             | resource    |
| [azurerm_dns_zone.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/dns_zone)                                                           | resource    |
| [azurerm_key_vault.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/key_vault)                                                         | resource    |
| [azurerm_kubernetes_cluster.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/kubernetes_cluster)                                       | resource    |
| [azurerm_kubernetes_cluster_node_pool.additional](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/kubernetes_cluster_node_pool)                | resource    |
| [azurerm_log_analytics_solution.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/log_analytics_solution)                               | resource    |
| [azurerm_log_analytics_workspace.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/log_analytics_workspace)                             | resource    |
| [azurerm_private_dns_zone.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/private_dns_zone)                                           | resource    |
| [azurerm_private_dns_zone_virtual_network_link.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/private_dns_zone_virtual_network_link) | resource    |
| [azurerm_public_ip.external_ingress](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/public_ip)                                                | resource    |
| [azurerm_resource_group.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/resource_group)                                               | resource    |
| [azurerm_role_assignment.acr](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/role_assignment)                                                 | resource    |
| [azurerm_role_assignment.acr2](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/role_assignment)                                                | resource    |
| [azurerm_role_assignment.network](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/role_assignment)                                             | resource    |
| [azurerm_role_assignment.rg_owner](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/role_assignment)                                            | resource    |
| [azurerm_subnet.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/subnet)                                                               | resource    |
| [azurerm_user_assigned_identity.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/user_assigned_identity)                               | resource    |
| [azurerm_virtual_network.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/virtual_network)                                             | resource    |
| [tls_private_key.ssh_key](https://registry.terraform.io/providers/hashicorp/tls/latest/docs/resources/private_key)                                                             | resource    |
| [azurerm_client_config.spn_client](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/client_config)                                           | data source |
| [azurerm_container_registry.acr_registry](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/container_registry)                               | data source |
| [azurerm_dns_zone.parent](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/dns_zone)                                                         | data source |
| [azurerm_resource_group.aks_rg_id](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/resource_group)                                          | data source |
| [azurerm_user_assigned_identity.aks_rg_id](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/user_assigned_identity)                          | data source |
| [azurerm_virtual_network.default](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/virtual_network)                                          | data source |

## Inputs

| Name                                                                                                                                 | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Type                                                                                                                          | Default                     | Required |
|--------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|-----------------------------|:--------:|
| <a name="input_acr_registry_name"></a> [acr_registry_name](#input_acr_registry_name)                                                 | ACR name                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `string`                                                                                                                      | `"myacrregistry"`           |    no    |
| <a name="input_acr_resource_group"></a> [acr_resource_group](#input_acr_resource_group)                                              | Supply your own resource group name for ACR                                                                                                                                                                                                                                                                                                                                                                                                                                             | `string`                                                                                                                      | `""`                        |    no    |
| <a name="input_admin_username"></a> [admin_username](#input_admin_username)                                                          | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                      | `"ubuntu"`                  |    no    |
| <a name="input_advanced_networking_enabled"></a> [advanced_networking_enabled](#input_advanced_networking_enabled)                   | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `bool`                                                                                                                        | `true`                      |    no    |
| <a name="input_aks_ingress_private_ip"></a> [aks_ingress_private_ip](#input_aks_ingress_private_ip)                                  | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                      | n/a                         |   yes    |
| <a name="input_aks_node_pools"></a> [aks_node_pools](#input_aks_node_pools)                                                          | Additional node pools as required by the platform                                                                                                                                                                                                                                                                                                                                                                                                                                       | <pre>map(object({<br> vm_size = string,<br> auto_scaling = bool,<br> min_nodes = number,<br> max_nodes = number<br> }))</pre> | `{}`                        |    no    |
| <a name="input_attributes"></a> [attributes](#input_attributes)                                                                      | Additional attributes for tagging                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `list`                                                                                                                        | `[]`                        |    no    |
| <a name="input_cluster_name"></a> [cluster_name](#input_cluster_name)                                                                | Name for the cluster                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `string`                                                                                                                      | `"akscluster"`              |    no    |
| <a name="input_cluster_version"></a> [cluster_version](#input_cluster_version)                                                       | Specify AKS cluster version - please refer to MS for latest updates on the available versions. NB: opt for stable versions where possible                                                                                                                                                                                                                                                                                                                                               | `string`                                                                                                                      | `"1.24.6"`                  |    no    |
| <a name="input_create_acr"></a> [create_acr](#input_create_acr)                                                                      | whether to create a ACR                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `bool`                                                                                                                        | `true`                      |    no    |
| <a name="input_create_aks"></a> [create_aks](#input_create_aks)                                                                      | Whether KAS gets created                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `bool`                                                                                                                        | `true`                      |    no    |
| <a name="input_create_aksvnet"></a> [create_aksvnet](#input_create_aksvnet)                                                          | Whether to create an AKS VNET specifically or use an existing one - if false you must supply an existing VNET name and a vnet_cidr for subnets                                                                                                                                                                                                                                                                                                                                          | `bool`                                                                                                                        | `true`                      |    no    |
| <a name="input_create_dns_zone"></a> [create_dns_zone](#input_create_dns_zone)                                                       | whether to create a DNS zone                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `bool`                                                                                                                        | `true`                      |    no    |
| <a name="input_create_key_vault"></a> [create_key_vault](#input_create_key_vault)                                                    | Specify if a key vault should be created                                                                                                                                                                                                                                                                                                                                                                                                                                                | `bool`                                                                                                                        | `true`                      |    no    |
| <a name="input_create_ssh_key"></a> [create_ssh_key](#input_create_ssh_key)                                                          | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `bool`                                                                                                                        | `true`                      |    no    |
| <a name="input_create_user_identity"></a> [create_user_identity](#input_create_user_identity)                                        | Creates a User Managed Identity - which can be used subsquently with AAD pod identity extensions                                                                                                                                                                                                                                                                                                                                                                                        | `bool`                                                                                                                        | `true`                      |    no    |
| <a name="input_dns_create_parent_zone_ns_records"></a> [dns_create_parent_zone_ns_records](#input_dns_create_parent_zone_ns_records) | Whether to create an NS record in the parent zone linking the created DNS zone up                                                                                                                                                                                                                                                                                                                                                                                                       | `bool`                                                                                                                        | `true`                      |    no    |
| <a name="input_dns_parent_ns_ttl"></a> [dns_parent_ns_ttl](#input_dns_parent_ns_ttl)                                                 | The TTL for the NS Record in the Parent Zone                                                                                                                                                                                                                                                                                                                                                                                                                                            | `string`                                                                                                                      | `300`                       |    no    |
| <a name="input_dns_parent_resource_group"></a> [dns_parent_resource_group](#input_dns_parent_resource_group)                         | RG that contains the existing parent DNS zone                                                                                                                                                                                                                                                                                                                                                                                                                                           | `string`                                                                                                                      | `null`                      |    no    |
| <a name="input_dns_parent_zone"></a> [dns_parent_zone](#input_dns_parent_zone)                                                       | Dns zone name for the parnet - e.g. domain.com. NOTE: you need control over this domain to add the records here                                                                                                                                                                                                                                                                                                                                                                         | `string`                                                                                                                      | `""`                        |    no    |
| <a name="input_dns_prefix"></a> [dns_prefix](#input_dns_prefix)                                                                      | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                      | `"aks"`                     |    no    |
| <a name="input_dns_resource_group"></a> [dns_resource_group](#input_dns_resource_group)                                              | RG that contains the existing DNS zones, if the zones are not being created here                                                                                                                                                                                                                                                                                                                                                                                                        | `string`                                                                                                                      | `null`                      |    no    |
| <a name="input_dns_zone"></a> [dns_zone](#input_dns_zone)                                                                            | Dns zone name - e.g. nonprod.domain.com, you should avoid using an APEX zone                                                                                                                                                                                                                                                                                                                                                                                                            | `string`                                                                                                                      | `""`                        |    no    |
| <a name="input_enable_auto_scaling"></a> [enable_auto_scaling](#input_enable_auto_scaling)                                           | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `bool`                                                                                                                        | `false`                     |    no    |
| <a name="input_internal_dns_zone"></a> [internal_dns_zone](#input_internal_dns_zone)                                                 | Internal DNS zone name - e.g. nonprod.domain.internal                                                                                                                                                                                                                                                                                                                                                                                                                                   | `string`                                                                                                                      | `""`                        |    no    |
| <a name="input_is_cluster_private"></a> [is_cluster_private](#input_is_cluster_private)                                              | Whether or not expose the Ingress over internet                                                                                                                                                                                                                                                                                                                                                                                                                                         | `bool`                                                                                                                        | `false`                     |    no    |
| <a name="input_key_vault_name"></a> [key_vault_name](#input_key_vault_name)                                                          | Key Vault name - if not specificied will default to computed naming convention                                                                                                                                                                                                                                                                                                                                                                                                          | `string`                                                                                                                      | `""`                        |    no    |
| <a name="input_log_application_type"></a> [log_application_type](#input_log_application_type)                                        | Log application type                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `string`                                                                                                                      | `"other"`                   |    no    |
| <a name="input_max_nodes"></a> [max_nodes](#input_max_nodes)                                                                         | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `number`                                                                                                                      | `10`                        |    no    |
| <a name="input_max_pods"></a> [max_pods](#input_max_pods)                                                                            | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `number`                                                                                                                      | `100`                       |    no    |
| <a name="input_min_nodes"></a> [min_nodes](#input_min_nodes)                                                                         | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `number`                                                                                                                      | `1`                         |    no    |
| <a name="input_name_company"></a> [name_company](#input_name_company)                                                                | Company Name - should/will be used in conventional resource naming                                                                                                                                                                                                                                                                                                                                                                                                                      | `string`                                                                                                                      | n/a                         |   yes    |
| <a name="input_name_component"></a> [name_component](#input_name_component)                                                          | Component Name - should/will be used in conventional resource naming. Typically this will be a logical name for this part of the system i.e. `API` \|\| `middleware` or more generic like `Billing`                                                                                                                                                                                                                                                                                     | `string`                                                                                                                      | n/a                         |   yes    |
| <a name="input_name_environment"></a> [name_environment](#input_name_environment)                                                    | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                      | n/a                         |   yes    |
| <a name="input_name_project"></a> [name_project](#input_name_project)                                                                | Project Name - should/will be used in conventional resource naming                                                                                                                                                                                                                                                                                                                                                                                                                      | `string`                                                                                                                      | n/a                         |   yes    |
| <a name="input_node_count"></a> [node_count](#input_node_count)                                                                      | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `number`                                                                                                                      | `0`                         |    no    |
| <a name="input_nodepool_type"></a> [nodepool_type](#input_nodepool_type)                                                             | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                      | `"VirtualMachineScaleSets"` |    no    |
| <a name="input_oms_ws_list_of_one"></a> [oms_ws_list_of_one](#input_oms_ws_list_of_one)                                              | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `list(map(string))`                                                                                                           | <pre>[<br> {}<br>]</pre>    |    no    |
| <a name="input_os_disk_size"></a> [os_disk_size](#input_os_disk_size)                                                                | DEFAULTS TO 30 if not overwritten                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `number`                                                                                                                      | `30`                        |    no    |
| <a name="input_private_cluster_enabled"></a> [private_cluster_enabled](#input_private_cluster_enabled)                               | Set cluster access private                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `bool`                                                                                                                        | `false`                     |    no    |
| <a name="input_registry_admin_enabled"></a> [registry_admin_enabled](#input_registry_admin_enabled)                                  | Whether ACR admin is enabled                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `bool`                                                                                                                        | `true`                      |    no    |
| <a name="input_registry_sku"></a> [registry_sku](#input_registry_sku)                                                                | ACR SKU                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `string`                                                                                                                      | `"Standard"`                |    no    |
| <a name="input_resource_group_location"></a> [resource_group_location](#input_resource_group_location)                               | Location of the RG                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `string`                                                                                                                      | `"uksouth"`                 |    no    |
| <a name="input_resource_group_tags"></a> [resource_group_tags](#input_resource_group_tags)                                           | Tags at a RG level                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `map(string)`                                                                                                                 | `{}`                        |    no    |
| <a name="input_resource_namer"></a> [resource_namer](#input_resource_namer)                                                          | This should be a uniformly created string - ideally using something like cloudposse label module to ensure conventions on naming are followed throughout organization. this value is used in all the places within the module to name resources - additionally it changes the string to ensure it conforms to Azure standards where appropriate - i.e. blob/KV/ACR names are stripped of non alphanumeric characters and in some cases strings are sliced to conform to max char length | `string`                                                                                                                      | `"genericname"`             |    no    |
| <a name="input_retention_in_days"></a> [retention_in_days](#input_retention_in_days)                                                 | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `number`                                                                                                                      | `30`                        |    no    |
| <a name="input_spn_object_id"></a> [spn_object_id](#input_spn_object_id)                                                             | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                      | n/a                         |   yes    |
| <a name="input_stage"></a> [stage](#input_stage)                                                                                     | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                      | `"dev"`                     |    no    |
| <a name="input_subnet_front_end_prefix"></a> [subnet_front_end_prefix](#input_subnet_front_end_prefix)                               | Prefix for front end subnet - should be in the form of x.x.x.x/x                                                                                                                                                                                                                                                                                                                                                                                                                        | `string`                                                                                                                      | n/a                         |   yes    |
| <a name="input_subnet_names"></a> [subnet_names](#input_subnet_names)                                                                | Names for subnets                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `list(string)`                                                                                                                | <pre>[<br> ""<br>]</pre>    |    no    |
| <a name="input_subnet_prefixes"></a> [subnet_prefixes](#input_subnet_prefixes)                                                       | Prefix for subnet - should be in the form of x.x.x.x/x                                                                                                                                                                                                                                                                                                                                                                                                                                  | `list(string)`                                                                                                                | <pre>[<br> ""<br>]</pre>    |    no    |
| <a name="input_tags"></a> [tags](#input_tags)                                                                                        | Tags to be assigned to all resources, NB if global tagging is enabled these will get overwritten periodically                                                                                                                                                                                                                                                                                                                                                                           | `map(string)`                                                                                                                 | `{}`                        |    no    |
| <a name="input_temporary_name_for_rotation"></a> [temporary_name_for_rotation](#input_temporary_name_for_rotation)                   | Temporary name for node pool rotation. Required when updating sensitive default node pool properties (name, vm_size, os_disk_size_gb, zones, kubelet_config, kubelet_disk_type, linux_os_config, max_pods, only_critical_addons_enabled, os_disk_type, pod_subnet_id, snapshot_id, ultra_ssd_enabled, vnet_subnet_id, host_encryption_enabled, node_public_ip_enabled, fips_enabled). Azure uses this to create a temporary node pool during the update process.                        | `string`                                                                                                                      | `""`                        |    no    |
| <a name="input_tenant_id"></a> [tenant_id](#input_tenant_id)                                                                         | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                      | n/a                         |   yes    |
| <a name="input_vm_size"></a> [vm_size](#input_vm_size)                                                                               | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `string`                                                                                                                      | `"Standard_DS2_v2"`         |    no    |
| <a name="input_vnet_cidr"></a> [vnet_cidr](#input_vnet_cidr)                                                                         | CIDR block notation for VNET                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `list(string)`                                                                                                                | n/a                         |   yes    |
| <a name="input_vnet_name"></a> [vnet_name](#input_vnet_name)                                                                         | VNET name if create_aks_vnet is false                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `string`                                                                                                                      | `""`                        |    no    |
| <a name="input_vnet_name_resource_group"></a> [vnet_name_resource_group](#input_vnet_name_resource_group)                            | VNET resource group name if user supplying an existing network                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`                                                                                                                      | `""`                        |    no    |

## Outputs

| Name                                                                                                                                         | Description                                                                                                                                                         |
|----------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <a name="output_acr_registry_name"></a> [acr_registry_name](#output_acr_registry_name)                                                       | Created ACR name                                                                                                                                                    |
| <a name="output_acr_resource_group_name"></a> [acr_resource_group_name](#output_acr_resource_group_name)                                     | Created ACR resource group Name                                                                                                                                     |
| <a name="output_aks_cluster_name"></a> [aks_cluster_name](#output_aks_cluster_name)                                                          | Created AKS resource group Name                                                                                                                                     |
| <a name="output_aks_default_user_identity_client_id"></a> [aks_default_user_identity_client_id](#output_aks_default_user_identity_client_id) | n/a                                                                                                                                                                 |
| <a name="output_aks_default_user_identity_id"></a> [aks_default_user_identity_id](#output_aks_default_user_identity_id)                      | n/a                                                                                                                                                                 |
| <a name="output_aks_default_user_identity_name"></a> [aks_default_user_identity_name](#output_aks_default_user_identity_name)                | ######################################## ############ Identity ################## ## used for AAD Pod identity binding ### ######################################## |
| <a name="output_aks_ingress_private_ip"></a> [aks_ingress_private_ip](#output_aks_ingress_private_ip)                                        | n/a                                                                                                                                                                 |
| <a name="output_aks_ingress_public_ip"></a> [aks_ingress_public_ip](#output_aks_ingress_public_ip)                                           | n/a                                                                                                                                                                 |
| <a name="output_aks_node_resource_group"></a> [aks_node_resource_group](#output_aks_node_resource_group)                                     | n/a                                                                                                                                                                 |
| <a name="output_aks_resource_group_name"></a> [aks_resource_group_name](#output_aks_resource_group_name)                                     | Created AKS resource group Name                                                                                                                                     |
| <a name="output_aks_system_identity_principal_id"></a> [aks_system_identity_principal_id](#output_aks_system_identity_principal_id)          | #########azurerm_kubernetes_cluster.default.identity.principal_id                                                                                                   |
| <a name="output_app_insights_id"></a> [app_insights_id](#output_app_insights_id)                                                             | n/a                                                                                                                                                                 |
| <a name="output_app_insights_key"></a> [app_insights_key](#output_app_insights_key)                                                          | n/a                                                                                                                                                                 |
| <a name="output_app_insights_name"></a> [app_insights_name](#output_app_insights_name)                                                       | n/a                                                                                                                                                                 |
| <a name="output_app_insights_resource_group_name"></a> [app_insights_resource_group_name](#output_app_insights_resource_group_name)          | n/a                                                                                                                                                                 |
| <a name="output_dns_base_domain"></a> [dns_base_domain](#output_dns_base_domain)                                                             | TODO: This is not even the Base DNS, it's the Environment DNS, terminology needs tidying up..?                                                                      |
| <a name="output_dns_base_domain_internal"></a> [dns_base_domain_internal](#output_dns_base_domain_internal)                                  | n/a                                                                                                                                                                 |
| <a name="output_dns_base_domain_name_servers"></a> [dns_base_domain_name_servers](#output_dns_base_domain_name_servers)                      | n/a                                                                                                                                                                 |
| <a name="output_dns_internal_resource_group_name"></a> [dns_internal_resource_group_name](#output_dns_internal_resource_group_name)          | n/a                                                                                                                                                                 |
| <a name="output_dns_resource_group_name"></a> [dns_resource_group_name](#output_dns_resource_group_name)                                     | n/a                                                                                                                                                                 |
| <a name="output_key_vault_name"></a> [key_vault_name](#output_key_vault_name)                                                                | n/a                                                                                                                                                                 |
| <a name="output_resource_group_id"></a> [resource_group_id](#output_resource_group_id)                                                       | Created resource group Id                                                                                                                                           |
| <a name="output_resource_group_name"></a> [resource_group_name](#output_resource_group_name)                                                 | Created resource group Name                                                                                                                                         |
| <a name="output_temporary_name_for_rotation"></a> [temporary_name_for_rotation](#output_temporary_name_for_rotation)                         | The temporary node pool name used for rotation operations                                                                                                           |
| <a name="output_vnet_address_id"></a> [vnet_address_id](#output_vnet_address_id)                                                             | Specified VNET Id                                                                                                                                                   |
| <a name="output_vnet_address_space"></a> [vnet_address_space](#output_vnet_address_space)                                                    | Specified VNET address space                                                                                                                                        |
| <a name="output_vnet_name"></a> [vnet_name](#output_vnet_name)                                                                               | Created VNET name.<br>Name can be deduced however it's better to create a direct dependency                                                                         |

## EXAMPLES

There is an examples folder with possible usage patterns.

`entire-infra`
